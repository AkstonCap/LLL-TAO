<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nexus: Legacy::CryptoKeyStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Neuxs_github.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nexus
   </div>
   <div id="projectbrief">The TAO Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_legacy_1_1_crypto_key_store.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_legacy_1_1_crypto_key_store-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Legacy::CryptoKeyStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="cryptokeystore_8h_source.html">cryptokeystore.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Legacy::CryptoKeyStore:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_legacy_1_1_crypto_key_store.png" usemap="#Legacy::CryptoKeyStore_map" alt=""/>
  <map id="Legacy::CryptoKeyStore_map" name="Legacy::CryptoKeyStore_map">
<area href="class_legacy_1_1_basic_key_store.html" alt="Legacy::BasicKeyStore" shape="rect" coords="0,56,150,80"/>
<area href="class_legacy_1_1_key_store.html" alt="Legacy::KeyStore" shape="rect" coords="0,0,150,24"/>
<area href="class_legacy_1_1_wallet.html" alt="Legacy::Wallet" shape="rect" coords="0,168,150,192"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a70e5d1784524f5d1842f05661f5f3234"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a70e5d1784524f5d1842f05661f5f3234">CryptoKeyStore</a> ()</td></tr>
<tr class="separator:a70e5d1784524f5d1842f05661f5f3234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060aa8d1639c03cdc5b172a29c5b426c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a060aa8d1639c03cdc5b172a29c5b426c">IsCrypted</a> () const</td></tr>
<tr class="separator:a060aa8d1639c03cdc5b172a29c5b426c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ce3adbd49f9a98d20612983f8784f3"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a77ce3adbd49f9a98d20612983f8784f3">IsLocked</a> () const</td></tr>
<tr class="separator:a77ce3adbd49f9a98d20612983f8784f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d92de63183bacd3c912aa48119433a"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a38d92de63183bacd3c912aa48119433a">Lock</a> ()</td></tr>
<tr class="separator:a38d92de63183bacd3c912aa48119433a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95fd2c93144738d6cacc61916301f335"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a95fd2c93144738d6cacc61916301f335">AddCryptedKey</a> (const std::vector&lt; uint8_t &gt; &amp;vchPubKey, const std::vector&lt; uint8_t &gt; &amp;vchCryptedSecret)</td></tr>
<tr class="separator:a95fd2c93144738d6cacc61916301f335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc8085ba2417fcd0211508fa5086c75"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a5cc8085ba2417fcd0211508fa5086c75">AddKey</a> (const <a class="el" href="class_l_l_c_1_1_e_c_key.html">LLC::ECKey</a> &amp;key) override</td></tr>
<tr class="separator:a5cc8085ba2417fcd0211508fa5086c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8b2d48e0a4903eef7e9b1fe03f9d6b"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a3a8b2d48e0a4903eef7e9b1fe03f9d6b">GetKey</a> (const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;address, <a class="el" href="class_l_l_c_1_1_e_c_key.html">LLC::ECKey</a> &amp;keyOut) const override</td></tr>
<tr class="separator:a3a8b2d48e0a4903eef7e9b1fe03f9d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18449cbcae7fe3e9cb4d588c2106130a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a18449cbcae7fe3e9cb4d588c2106130a">GetKeys</a> (std::set&lt; <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &gt; &amp;setAddress) const override</td></tr>
<tr class="separator:a18449cbcae7fe3e9cb4d588c2106130a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ea31ca1e2666fe10cbeab03e08866e7"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a8ea31ca1e2666fe10cbeab03e08866e7">HaveKey</a> (const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;address) const override</td></tr>
<tr class="separator:a8ea31ca1e2666fe10cbeab03e08866e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9527900d254402c2e5a72d37d7715763"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a9527900d254402c2e5a72d37d7715763">GetPubKey</a> (const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;address, std::vector&lt; uint8_t &gt; &amp;vchPubKeyOut) const override</td></tr>
<tr class="separator:a9527900d254402c2e5a72d37d7715763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_legacy_1_1_basic_key_store"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_legacy_1_1_basic_key_store')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_legacy_1_1_basic_key_store.html">Legacy::BasicKeyStore</a></td></tr>
<tr class="memitem:ab99aeb5cd5313189c395803c91c50b1f inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#ab99aeb5cd5313189c395803c91c50b1f">AddScript</a> (const <a class="el" href="class_legacy_1_1_script.html">Script</a> &amp;redeemScript) override</td></tr>
<tr class="separator:ab99aeb5cd5313189c395803c91c50b1f inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10593afcd02bcaaf39912a5b83b463a inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#ae10593afcd02bcaaf39912a5b83b463a">GetScript</a> (const <a class="el" href="classuint256__t.html">uint256_t</a> &amp;hash, <a class="el" href="class_legacy_1_1_script.html">Script</a> &amp;redeemScriptOut) const override</td></tr>
<tr class="separator:ae10593afcd02bcaaf39912a5b83b463a inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c4432c258fca65af8f277dbfb4a6aa inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#aa8c4432c258fca65af8f277dbfb4a6aa">HaveScript</a> (const <a class="el" href="classuint256__t.html">uint256_t</a> &amp;hash) const override</td></tr>
<tr class="separator:aa8c4432c258fca65af8f277dbfb4a6aa inherit pub_methods_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_legacy_1_1_key_store"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_legacy_1_1_key_store')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_legacy_1_1_key_store.html">Legacy::KeyStore</a></td></tr>
<tr class="memitem:a65161d19f108c1f6176c1281c09678fe inherit pub_methods_class_legacy_1_1_key_store"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_key_store.html#a65161d19f108c1f6176c1281c09678fe">~KeyStore</a> ()=default</td></tr>
<tr class="separator:a65161d19f108c1f6176c1281c09678fe inherit pub_methods_class_legacy_1_1_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55efbcf0180b8e2f5c03c87405a180dc inherit pub_methods_class_legacy_1_1_key_store"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_key_store.html#a55efbcf0180b8e2f5c03c87405a180dc">GetSecret</a> (const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;address, <a class="el" href="namespace_l_l_c.html#ab127b65d70b92cd40767b7e11907aced">LLC::CSecret</a> &amp;vchSecret, bool &amp;fCompressed) const</td></tr>
<tr class="separator:a55efbcf0180b8e2f5c03c87405a180dc inherit pub_methods_class_legacy_1_1_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a0268bc44210fd6428e29d937178e207b"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a0268bc44210fd6428e29d937178e207b">SetCrypted</a> ()</td></tr>
<tr class="separator:a0268bc44210fd6428e29d937178e207b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e19a1d81a280bc5b128224a04641e21"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a3e19a1d81a280bc5b128224a04641e21">EncryptKeys</a> (const <a class="el" href="namespace_legacy.html#a690df482a497139ee2417a34abdcc9f6">CKeyingMaterial</a> &amp;vMasterKeyIn)</td></tr>
<tr class="separator:a3e19a1d81a280bc5b128224a04641e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8af828262fe2e4716640838ce820c32"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#ad8af828262fe2e4716640838ce820c32">Unlock</a> (const <a class="el" href="namespace_legacy.html#a690df482a497139ee2417a34abdcc9f6">CKeyingMaterial</a> &amp;vMasterKeyIn)</td></tr>
<tr class="separator:ad8af828262fe2e4716640838ce820c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a9f239d7d60cbb94e26d682a7a74362a2"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_crypto_key_store.html#a9f239d7d60cbb94e26d682a7a74362a2">cs_cryptoKeyStore</a></td></tr>
<tr class="separator:a9f239d7d60cbb94e26d682a7a74362a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_legacy_1_1_basic_key_store"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_legacy_1_1_basic_key_store')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_legacy_1_1_basic_key_store.html">Legacy::BasicKeyStore</a></td></tr>
<tr class="memitem:a25693341f94183139523d9d6b14d1a23 inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#a25693341f94183139523d9d6b14d1a23">cs_basicKeyStore</a></td></tr>
<tr class="separator:a25693341f94183139523d9d6b14d1a23 inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6bcf2fb15e8c7650174d7730cd4683c inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_legacy.html#ada5f4c303b1e61a3e5124bbbf168896c">KeyMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#ac6bcf2fb15e8c7650174d7730cd4683c">mapKeys</a></td></tr>
<tr class="separator:ac6bcf2fb15e8c7650174d7730cd4683c inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb989e3b8e337a996d284485714628d inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_legacy.html#a6878086cddb0d4f36c971a0ff0a08ace">ScriptMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_legacy_1_1_basic_key_store.html#afbb989e3b8e337a996d284485714628d">mapScripts</a></td></tr>
<tr class="separator:afbb989e3b8e337a996d284485714628d inherit pro_attribs_class_legacy_1_1_basic_key_store"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Key store that keeps the private keys encrypted.</p>
<p>Supports having encryption active or inactive. Must be one or the other for all keys. It derives from the basic key store, which is used if encryption is inactive. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a70e5d1784524f5d1842f05661f5f3234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70e5d1784524f5d1842f05661f5f3234">&#9670;&nbsp;</a></span>CryptoKeyStore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Legacy::CryptoKeyStore::CryptoKeyStore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default constructor</p>
<p>Initializes key store as unencrypted </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a95fd2c93144738d6cacc61916301f335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95fd2c93144738d6cacc61916301f335">&#9670;&nbsp;</a></span>AddCryptedKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::AddCryptedKey </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>vchPubKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>vchCryptedSecret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AddCryptedKey</p>
<p>Add a public/encrypted private key pair to the key store. Key pair must be created from the same master key used to create any other key pairs in the store. Key store must have encryption active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vchPubKey</td><td>The public key to add</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vchCryptedSecret</td><td>The encrypted private key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if key successfully added </dd></dl>

<p>Reimplemented in <a class="el" href="class_legacy_1_1_wallet.html#af2ed33a9d3669a01b721a6b4eaaf0295">Legacy::Wallet</a>.</p>

</div>
</div>
<a id="a5cc8085ba2417fcd0211508fa5086c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc8085ba2417fcd0211508fa5086c75">&#9670;&nbsp;</a></span>AddKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::AddKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_l_l_c_1_1_e_c_key.html">LLC::ECKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AddKey</p>
<p>Add a key to the key store. Encrypts the key if encryption is active and key store unlocked. Adds to basic keystore if encryption not active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key to add</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if key successfully added </dd></dl>

<p>Reimplemented from <a class="el" href="class_legacy_1_1_basic_key_store.html#a8484fcae8268d28aad08f7d47efaddaa">Legacy::BasicKeyStore</a>.</p>

<p>Reimplemented in <a class="el" href="class_legacy_1_1_wallet.html#a7572cad8b6ac84431a1a6432d6788faa">Legacy::Wallet</a>.</p>

</div>
</div>
<a id="a3e19a1d81a280bc5b128224a04641e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e19a1d81a280bc5b128224a04641e21">&#9670;&nbsp;</a></span>EncryptKeys()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::EncryptKeys </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_legacy.html#a690df482a497139ee2417a34abdcc9f6">CKeyingMaterial</a> &amp;&#160;</td>
          <td class="paramname"><em>vMasterKeyIn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>EncryptKeys</p>
<p>Convert the key store from unencrypted to encrypted. Activates encryption for the key store and encrypts any previously unencrypted keys.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vMasterKeyIn</td><td>Encryption key used to perform encryption. Value is not stored in vMasterKey so key store remains locked after conversion until explictly unlocked</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if keys successfully encrypted and moved from mapKeys to mapCryptedKeys false if key store previously encrypted or encryption not successful </dd></dl>

</div>
</div>
<a id="a3a8b2d48e0a4903eef7e9b1fe03f9d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a8b2d48e0a4903eef7e9b1fe03f9d6b">&#9670;&nbsp;</a></span>GetKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::GetKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_l_l_c_1_1_e_c_key.html">LLC::ECKey</a> &amp;&#160;</td>
          <td class="paramname"><em>keyOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetKey</p>
<p>Retrieve a key from the key store. Encrypted key store must be unlocked. Decrypts the key if encryption is active.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The Base 58-encoded address of the key to retrieve</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">keyOut</td><td>The retrieved key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if key successfully retrieved </dd></dl>

<p>Reimplemented from <a class="el" href="class_legacy_1_1_basic_key_store.html#a72fab8cc5a1882fc4a4286767da6b347">Legacy::BasicKeyStore</a>.</p>

</div>
</div>
<a id="a18449cbcae7fe3e9cb4d588c2106130a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18449cbcae7fe3e9cb4d588c2106130a">&#9670;&nbsp;</a></span>GetKeys()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Legacy::CryptoKeyStore::GetKeys </td>
          <td>(</td>
          <td class="paramtype">std::set&lt; <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>setAddress</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetKeys</p>
<p>Retrieve the set of public addresses for all keys currently present in the key store. Encrypted key store does not require unlock to retrieve public addresses.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">setAddress</td><td>A Set containing the Base 58-encoded addresses of the all keys currently in the key store </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="class_legacy_1_1_basic_key_store.html#a2f0d2aa6de6a926d0478322956dd07a8">Legacy::BasicKeyStore</a>.</p>

</div>
</div>
<a id="a9527900d254402c2e5a72d37d7715763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9527900d254402c2e5a72d37d7715763">&#9670;&nbsp;</a></span>GetPubKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::GetPubKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>vchPubKeyOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GetPubKey</p>
<p>Retrieve the public key for a key in the key store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The Base 58-encoded address of the key to retrieve</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vchPubKeyOut</td><td>A byte vector containing the retrieved public key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if public key was successfully retrieved </dd></dl>

<p>Reimplemented from <a class="el" href="class_legacy_1_1_key_store.html#a775bac3b2be986e3af6216aec4e4677c">Legacy::KeyStore</a>.</p>

</div>
</div>
<a id="a8ea31ca1e2666fe10cbeab03e08866e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ea31ca1e2666fe10cbeab03e08866e7">&#9670;&nbsp;</a></span>HaveKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::HaveKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_legacy_1_1_nexus_address.html">NexusAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>HaveKey</p>
<p>Check whether a key corresponding to a given address is present in the store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The Base 58-encoded address of the key to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if key is present in the key store </dd></dl>

<p>Reimplemented from <a class="el" href="class_legacy_1_1_basic_key_store.html#a3999a53ce27a0507306699ee49834fee">Legacy::BasicKeyStore</a>.</p>

</div>
</div>
<a id="a060aa8d1639c03cdc5b172a29c5b426c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060aa8d1639c03cdc5b172a29c5b426c">&#9670;&nbsp;</a></span>IsCrypted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::IsCrypted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>isCrypted</p>
<p>Check if key store is encrypted</p>
<dl class="section return"><dt>Returns</dt><dd>true if key store is using encryption </dd></dl>

</div>
</div>
<a id="a77ce3adbd49f9a98d20612983f8784f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ce3adbd49f9a98d20612983f8784f3">&#9670;&nbsp;</a></span>IsLocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::IsLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>IsLocked</p>
<p>Check whether or not the key store is currently locked.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the key store is locked </dd></dl>

</div>
</div>
<a id="a38d92de63183bacd3c912aa48119433a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d92de63183bacd3c912aa48119433a">&#9670;&nbsp;</a></span>Lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::Lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Lock</p>
<p>Attempt to lock the key store. Can only lock the key store if it is encrypted.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the key store was successfully locked </dd></dl>

<p>Reimplemented in <a class="el" href="class_legacy_1_1_wallet.html#aecf1ad86c38d4144c28bc4e7aafc0dfa">Legacy::Wallet</a>.</p>

</div>
</div>
<a id="a0268bc44210fd6428e29d937178e207b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0268bc44210fd6428e29d937178e207b">&#9670;&nbsp;</a></span>SetCrypted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::SetCrypted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SetCrypted</p>
<p>Activate encryption for an empty key store. To activate successfully, the key store cannot contain any unencrypted keys.</p>
<dl class="section return"><dt>Returns</dt><dd>true if encryption successfully activated or previously active </dd></dl>

</div>
</div>
<a id="ad8af828262fe2e4716640838ce820c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8af828262fe2e4716640838ce820c32">&#9670;&nbsp;</a></span>Unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Legacy::CryptoKeyStore::Unlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_legacy.html#a690df482a497139ee2417a34abdcc9f6">CKeyingMaterial</a> &amp;&#160;</td>
          <td class="paramname"><em>vMasterKeyIn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unlock</p>
<p>Attempt to unlock an encrypted key store using the key provided. Encrypted key store cannot be accessed until unlocked by providing the key used to encrypt it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vMasterKeyIn</td><td>Encryption key originally used to perform encryption.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if master key matches key used to encrypt the store and unlock is successful </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9f239d7d60cbb94e26d682a7a74362a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f239d7d60cbb94e26d682a7a74362a2">&#9670;&nbsp;</a></span>cs_cryptoKeyStore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex Legacy::CryptoKeyStore::cs_cryptoKeyStore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex for thread concurrency. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>E:/Nexus/NexusGit/LLL-TAO/src/Legacy/wallet/<a class="el" href="cryptokeystore_8h_source.html">cryptokeystore.h</a></li>
<li>E:/Nexus/NexusGit/LLL-TAO/src/Legacy/<a class="el" href="cryptokeystore_8cpp.html">cryptokeystore.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_legacy.html">Legacy</a></li><li class="navelem"><a class="el" href="class_legacy_1_1_crypto_key_store.html">CryptoKeyStore</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
